    ipcRenderer.send('settingsNeedSettings');

    var form = document.getElementById("clientsettings");

    form.addEventListener("change", function () {
        // Save Preferences/Settings
        var _inputs = document.getElementsByTagName('input');
        var _dropdowns = document.getElementsByTagName('select');
        var _preferences = {};
        for (var i = 0; i < _inputs.length; i++) {
            if (_inputs[i].className == 'checkbox' || _inputs[i].className == 'form__input') {
                if (_inputs[i].type == 'checkbox') {
                    _preferences[_inputs[i].name] = _inputs[i].checked;
                    if(_inputs[i].name == "fpsCounter"){
                        if(fpsCounterOn == false && _inputs[i].checked){
                            fpsCounterOn = true;
                            var times = [];
                            var fps;
                            var fpsOut = document.createElement("h2");
                            fpsOut.style.position = "fixed";
                            fpsOut.style.left = 0;
                            fpsOut.style.top = 0;
                            document.body.appendChild(fpsOut);
                        
                            function refreshLoop() {
                                if(fpsCounterOn){
                                    window.requestAnimationFrame(function() {
                                        const now = performance.now();
                                        while (times.length > 0 && times[0] <= now - 1000) {
                                            times.shift();
                                        }
                                        times.push(now);
                                        fps = times.length;
                                       fpsOut.innerText = fps + " FPS";
                                        refreshLoop();
                                    });
                                } else {
                                    fpsOut.remove();
                                }
                            }
                        
                            refreshLoop();
                        }
                        fpsCounterOn = _inputs[i].checked;
                    }
                }
                else {
                    _preferences[_inputs[i].name] = _inputs[i].value;
                }
            }
        };
        for (var i = 0; i < _dropdowns.length; i++) {
            if (_dropdowns[i].className == 's-hidden') {
                _preferences[_dropdowns[i].name] = _dropdowns[i].value;
            }
        };
        // Send data to be stored
        ipcRenderer.send('savedSettings', _preferences);
    });

    document.getElementById('clientSettingsTab').addEventListener("click", (event) => {
        switchSettingsMenu();
    });
    document.getElementById('gameSettingsTab').addEventListener("click", (event) => {
        switchSettingsMenu();
    });